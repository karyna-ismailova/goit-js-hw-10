{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst refs = {\n    daysEl: document.querySelector(\"[data-days]\"),\n    hoursEl: document.querySelector(\"[data-hours]\"),\n    minsEl: document.querySelector(\"[data-minutes]\"),\n    secsEl: document.querySelector(\"[data-seconds]\"),\n    datePicker : document.querySelector(\"#datetime-picker\"),\n    startButton : document.querySelector(\"[data-start]\"),\n}\nlet userSelectedDate = null;\nlet timerId = null;\n\n\nflatpickr(refs.datePicker, {\n   \n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n      userSelectedDate = selectedDates[0];\n      if (userSelectedDate > new Date()) {\n          refs.startButton.disabled = false;\n      } else {\n          iziToast.error({\n    title: 'Error',\n    message: 'Please choose a date in the future',\n});\n         \n\n          refs.startButton.disabled = true;\n      }\n  },\n\n\n})\n\nrefs.startButton.addEventListener(\"click\", () => {\n    refs.startButton.disabled = true;\n    refs.datePicker.disabled = true;\n\n    timerId = setInterval(() => {\n        const now = new Date();\n        const diff = userSelectedDate - now;\n\n        if (diff <= 0) {\n            clearInterval(timerId);\n            refs.datePicker.disabled = false;\n            refs.startButton.disabled = true;\n            updateDisplay(0, 0, 0, 0);\n            return;\n            \n        }\n        const { days, hours, minutes, seconds } = convertMs(diff);\n        updateDisplay(days, hours, minutes, seconds);\n    },1000)\n})\n\nfunction updateDisplay(days, hours, minutes, seconds) {\n    refs.daysEl.textContent = addLeadingZero(days);\n    refs.hoursEl.textContent = addLeadingZero(hours);\n    refs.minsEl.textContent = addLeadingZero(minutes);\n    refs.secsEl.textContent = addLeadingZero(seconds);\n}\n\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, '0');\n}\n\nfunction convertMs(ms) {\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n    \n    const days = Math.floor(ms / day);\n    const hours = Math.floor((ms % day) / hour);\n    const minutes = Math.floor((ms % hour) / minute);\n    const seconds = Math.floor((ms % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}"],"names":["refs","userSelectedDate","timerId","flatpickr","selectedDates","iziToast","diff","updateDisplay","days","hours","minutes","seconds","convertMs","addLeadingZero","value","ms"],"mappings":"+IAOA,MAAMA,EAAO,CACT,OAAQ,SAAS,cAAc,aAAa,EAC5C,QAAS,SAAS,cAAc,cAAc,EAC9C,OAAQ,SAAS,cAAc,gBAAgB,EAC/C,OAAQ,SAAS,cAAc,gBAAgB,EAC/C,WAAa,SAAS,cAAc,kBAAkB,EACtD,YAAc,SAAS,cAAc,cAAc,CACvD,EACA,IAAIC,EAAmB,KACnBC,EAAU,KAGdC,EAAUH,EAAK,WAAY,CAEzB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQI,EAAe,CACnBH,EAAmBG,EAAc,CAAC,EAC9BH,EAAmB,IAAI,KACvBD,EAAK,YAAY,SAAW,IAE5BK,EAAS,MAAM,CACrB,MAAO,QACP,QAAS,oCACb,CAAC,EAGSL,EAAK,YAAY,SAAW,GAEnC,CAGH,CAAC,EAEDA,EAAK,YAAY,iBAAiB,QAAS,IAAM,CAC7CA,EAAK,YAAY,SAAW,GAC5BA,EAAK,WAAW,SAAW,GAE3BE,EAAU,YAAY,IAAM,CAExB,MAAMI,EAAOL,EADD,IAAI,KAGhB,GAAIK,GAAQ,EAAG,CACX,cAAcJ,CAAO,EACrBF,EAAK,WAAW,SAAW,GAC3BA,EAAK,YAAY,SAAW,GAC5BO,EAAc,EAAG,EAAG,EAAG,CAAC,EACxB,MAEH,CACD,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUN,CAAI,EACxDC,EAAcC,EAAMC,EAAOC,EAASC,CAAO,CAC9C,EAAC,GAAI,CACV,CAAC,EAED,SAASJ,EAAcC,EAAMC,EAAOC,EAASC,EAAS,CAClDX,EAAK,OAAO,YAAca,EAAeL,CAAI,EAC7CR,EAAK,QAAQ,YAAca,EAAeJ,CAAK,EAC/CT,EAAK,OAAO,YAAca,EAAeH,CAAO,EAChDV,EAAK,OAAO,YAAca,EAAeF,CAAO,CACpD,CAEA,SAASE,EAAeC,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASF,EAAUG,EAAI,CAMnB,MAAMP,EAAO,KAAK,MAAMO,EAAK,KAAG,EAC1BN,EAAQ,KAAK,MAAOM,EAAK,MAAO,IAAI,EACpCL,EAAU,KAAK,MAAOK,EAAK,KAAQ,GAAM,EACzCJ,EAAU,KAAK,MAAOI,EAAK,IAAU,GAAM,EAEnD,MAAO,CAAE,KAAAP,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}